(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(13),c=n.n(l),o=(n(19),n(2)),u=n(3),m=n.n(u),i="/api/persons",s=function(){return m.a.get(i).then((function(e){return e.data}))},d=function(e){return m.a.post(i,e).then((function(e){return e.data}))},f=function(e){return m.a.delete("".concat(i,"/").concat(e.id)).then((function(e){return e.data}))},h=function(e,t){return m.a.put("".concat(i,"/").concat(e),t).then((function(e){return e.data}))},E=function(e){var t=e.text,n=e.type;return r.a.createElement(r.a.Fragment,null,r.a.createElement(n,null,t))},b=function(e){var t=e.newMatch,n=e.handleMatchChange;return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"filter shown with:"),r.a.createElement("td",null,r.a.createElement("input",{value:t,onChange:n})))))},p=function(e){var t=e.message,n=e.error;return t.length>0?r.a.createElement("div",{className:"action message"},r.a.createElement("p",null,t)):n.length>0?r.a.createElement("div",{className:"action error"},r.a.createElement("p",null,n)):null},g=function(e){var t=e.addPerson,n=e.newName,a=e.newNumber,l=e.handleNameChange,c=e.handleNumberChange,o=e.message,u=e.error;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:t},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"name:"),r.a.createElement("td",null,r.a.createElement("input",{value:n,onChange:l}))),r.a.createElement("tr",null,r.a.createElement("td",null,"number:"),r.a.createElement("td",null,r.a.createElement("input",{value:a,onChange:c}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("button",{type:"submit"},"add")))))),r.a.createElement(p,{message:o,error:u}))},v=function(e){var t=e.person,n=e.deletePerson;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(t)}},"delete")))},w=function(e){var t=e.persons,n=e.deletePerson;return r.a.createElement("table",null,r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement(v,{key:t,person:e,deletePerson:n})}))))},j=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(""),u=Object(o.a)(c,2),m=u[0],i=u[1],p=Object(a.useState)(""),v=Object(o.a)(p,2),j=v[0],y=v[1],O=Object(a.useState)(""),C=Object(o.a)(O,2),N=C[0],k=C[1],P=Object(a.useState)(""),S=Object(o.a)(P,2),x=S[0],T=S[1],M=Object(a.useState)(""),A=Object(o.a)(M,2),D=A[0],I=A[1];Object(a.useEffect)((function(){s().then((function(e){l(e)}))}),[]);var J=n.filter((function(e){return e.name.toLowerCase().includes(N)}));return r.a.createElement("div",null,r.a.createElement(E,{text:"Phonebook",type:"h1"}),r.a.createElement(b,{match:N,handleMatchChange:function(e){k(e.target.value.toLowerCase())}}),r.a.createElement(E,{text:"add a new",type:"h2"}),r.a.createElement(g,{addPerson:function(e){e.preventDefault();var t={name:m,number:j},a=n.filter((function(e){return e.name===m})),r=n.filter((function(e){return e.number===j}));0===a.length&&0===r.length?d(t).then((function(e){l(n.concat(e)),T("Added ".concat(m)),setTimeout((function(){T("")}),4e3),i(""),y(""),console.log("post succes")})).catch((function(e){I(e.response.data.error),setTimeout((function(){I("")}),4e3)})):0!==a.length?window.confirm("".concat(a[0].name," is already added to phonebook, replace the old number with a new one?"))&&h(a[0].id,t).then((function(e){l(n.map((function(t){return t.id!==e.id?t:e}))),T("Added new phonenumber to ".concat(e.name)),setTimeout((function(){T("")}),4e3),i(""),y(""),console.log("alteration success")})).catch((function(e){I("Information of ".concat(a[0].name," has already been removed from the server. Please refresh the browser.")),setTimeout((function(){I("")}),4e3)})):0!==r.length&&(I("".concat(r[0].number," is already in the phonebook under a different name.")),setTimeout((function(){I("")}),4e3))},newName:m,newNumber:j,handleNameChange:function(e){i(e.target.value)},handleNumberChange:function(e){y(e.target.value)},message:x,error:D}),r.a.createElement(E,{text:"Numbers",type:"h2"}),r.a.createElement(w,{persons:J,deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&f(e).then((function(){l(n.filter((function(t){return t.id!==e.id}))),console.log("deletion succes")}))}}))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.2689fd67.chunk.js.map